<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
</head>
<div class="jumbotron">
    <h1>ASP.NET</h1>
    <p class="lead">ASP.NET is a free web framework for building great Web sites and Web applications using HTML, CSS, and JavaScript.</p>
    <p><a href="http://asp.net" class="btn btn-primary btn-lg">Learn more &raquo;</a></p>
</div>
<div class="row">
    <div class="col-md-4">
        <h2>Getting started</h2>
        <p>ASP.NET Web API is a framework that makes it easy to build HTTP services that reach
        a broad range of clients, including browsers and mobile devices. ASP.NET Web API
        is an ideal platform for building RESTful applications on the .NET Framework.</p>
        <p><a class="btn btn-default" href="http://go.microsoft.com/fwlink/?LinkId=301870">Learn more &raquo;</a></p>
    </div>
    <div class="col-md-4">
        <h2>Get more libraries</h2>
        <p>NuGet is a free Visual Studio extension that makes it easy to add, remove, and update libraries and tools in Visual Studio projects.</p>
        <p><a class="btn btn-default" href="http://go.microsoft.com/fwlink/?LinkId=301871">Learn more &raquo;</a></p>
    </div>
    <div class="col-md-4">
        <h2>Web Hosting</h2>
        <p>You can easily find a web hosting company that offers the right mix of features and price for your applications.</p>
        <p><a class="btn btn-default" href="http://go.microsoft.com/fwlink/?LinkId=301872">Learn more &raquo;</a></p>
    </div>
</div>

<script>

    $(document).ready(function () {
        //debugger;
        //var access_token;
        //access_token = authenticateUser();
        //debugger;
        //if (access_token != -1)
        //{
        //    var products = authenticatedUser(access_token);
        //}



        //var model = {
        //    Name: "Shyju",
        //    Id: 123,
        //    Tags: [{ Id: 12, Code: "C" }, { Id: 33, Code: "Swift" }]
        //};

        //$.ajax({
        //    type: "POST",
        //    data: JSON.stringify(model),
        //    url: "/reports/preCommissioningAHU",
        //    contentType: "application/json"
        //}).done(function (res) {
        //    debugger;
        //    console.log('res', res);
        //});
    });


    function authenticateUser() {       
        debugger;
        var body = {
            grant_type: 'password',
            username: 'harry.brown@kingit.com.au',
            password: 'Harry@123'
        };

        var status;
        $.ajax({
            url: 'http://localhost:6719/Token',
            type: 'POST',
            dataType: 'json',
            contentType: 'application/x-www-form-urlencoded; charset=UTF-8',
            data: body,
            async:false,
            success: function (result) {
                debugger;
                status = result.access_token;
            },
            error: function (result) {
                debugger;
                //status = result.status;
                status = -1;
            },
        });
        return status;
    }

    function authenticatedUser(access_token)
    {
        var products;
        $.ajax({
            url: "http://localhost:6719/api/products",
            type: 'GET',
            headers: { "Authorization": 'Bearer ' + access_token },
            async: false,
            success: function (result) {
                debugger;
                products = result;
            },
            error: function (result) {
                debugger;
                products = -1;
            },
        });
        return products;
    }
    

</script>
